=====================================================================
                         CQ-V850ターゲット依存部
                                  Last Modified: '13/01/11
=====================================================================


○概要

CQ-V850ターゲット依存部は，プロセッサにV850/JG2を
搭載した，Interface誌付録基板CQ-V850をサポートしている．

○カーネルの使用リソース

カーネルは以下のリソースを使用する．

  ・TMM
     カーネル内部のティックの生成に用いる．
     
  ・UARTAチャネル0
     コンソールの出力に使用する．

○他のターゲットへの移植

CQ-V850ターゲット依存で使用するタイマやUARTは，V850/JG2の
内蔵機能のみを使用するため，V850/JG2や近い構成のV850ESを用いた環境には
容易にポーティングが可能である．ポーティングに関しては，以下の
初期化ルーチンにターゲット毎の初期化を追加すればよい．

  ・target_initialize() : target_config.c
    ターゲット依存部の初期化（C言語）
  ・SIL_DLY_TIM1，SIL_DLY_TIM1：target_sil.h
    sil_dly_nse内で用いる


○デバッグ環境

デバッグ環境としては特殊電子回路株式会社製J-Writerと
NAHICEの組み合わせを想定している．

ただし，デバッグ環境への対応はセキュリティIDのみであるため，
メーカー純正環境や他のサードパーティ製デバッガでも
問題なく使用可能である．

○コンパイラ

以下の開発環境を用いて動作確認を行った．

  cygwin      1.7.1(0.218/5/3)
  GCC         4.3.4
  binutils    2.20
  newlib      1.18.0
  GNU make    3.8.1

○コンソール出力

コンソール出力には，UARTのチャネル0を用いる．CQ-V850上ではUARTの
チャネル1は，CN4に接続されている
(USB-シリアル変換IC CP2102経由によりUSBケーブルにてホストPCと接続する)．

通信フォーマットは以下の通りである．

  ・38400bps, Data 8bit, Parity none, Stop 1bit, Flow control none


○アドレスマッピング

  0x00000000 - 0x0003FFFF     内蔵FlashROM      256KB
   * 0x00000000 - 0x000003FF  .vectors(割込みハンドラ領域)
   * 0x00000400 - 24KB        .text，.rodata，.call_table_data，.call_table_text
   
  0xFFFF9000 - 0xFFFFEFFF     内蔵RAM           24KB
   * 0xFFFF9000 - 0xFFFFEFFF  .data，.bss，.sdata

○各種設定の変更

幾つかのパラメータは変更可能になっている．設定ファイル毎に設定可能項目
は次のようになっている．

●target_support.h の設定項目

・SIL_DLY_TIM1/2
  微少時間待ちのための定義

●target_syssvc.h の設定項目

・TARGET_PUTC_PORTID
  コンソールに使用するポート
・TARGET_PUTC_BAUD
  コンソールに使用するポートのボーレート

●CPUロックで用いる割込み優先度TMIN_INTPRIの定義

・C言語用の定義：
  デフォルトの定義：prc_kernel.h
  ターゲット依存の定義：target_config.h（現状では未定義）

○変更履歴
2010/07/18  ・新規作成                                        杉本明加
2011/05/20  ・ターゲット非依存部1.7.0に対応                   杉本明加
2013/01/11  ・ターゲット非依存部1.8.0に対応                   杉本明加
              - char_t型の廃止に伴い，char_t型をchar型に変更
